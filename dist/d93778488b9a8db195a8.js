webpackJsonp([5],{386:function(t,e,n){var o={};o.$style=n(398);var r=n(65)(n(388),n(396),null,o);t.exports=r.exports},388:function(t,e,n){"use strict";function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function o(o,s){try{var i=e[o](s),c=i.value}catch(t){return void n(t)}i.done?t(c):Promise.resolve(c).then(r,a)}function r(t){o("next",t)}function a(t){o("throw",t)}r()})}}Object.defineProperty(e,"__esModule",{value:!0});var r=n(52),a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},s=["歌手","张杰","赵雷","李健","林志炫","张碧晨","梁博","周笔畅","张靓颖","陈奕迅","周杰伦","王力宏","TFBoys","李玉刚","魏晨","薛之谦"];e.default={name:"discover",data:function(){for(var t=[];t.length<6;)t.push(s.splice(~~(Math.random()*s.length),1)[0]);return{active:!1,hotKeywords:t,keyword:null,searched:!1}},computed:a({},n.i(r.mapGetters)(["showFooter","songList","songIndex"])),beforeRouteLeave:function(t,e,n){this.searched=!1,this.toggleFooter(!0),n()},methods:a({},n.i(r.mapActions)(["restSongList","toggleSong","toggleFooter","setSongSrc"]),{search:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.keyword=e||this.keyword){t.next=3;break}return t.abrupt("return");case 3:return this.active=!0,t.t0=this,t.next=7,this.$http.get("/search-keyword",{params:{key:n}});case 7:t.t1=t.sent.data,t.t0.restSongList.call(t.t0,t.t1),this.searched=!0,this.toggleFooter(!1);case 11:case"end":return t.stop()}},t,this)}));return t}(),cancelSearch:function(){this.searched=!1,this.active=!1},getSongSrc:function(){function t(t,n){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e,n){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.songList[n],o.songSrc){t.next=7;break}return t.t0=this,t.next=5,this.$http.get("/get-song-src",{params:{id:e}});case 5:t.t1=o.songSrc=t.sent.data,t.t0.setSongSrc.call(t.t0,t.t1);case 7:this.toggleSong({index:n,play:!0}),this.toggleFooter(!0);case 9:case"end":return t.stop()}},t,this)}));return t}()})}},390:function(t,e,n){e=t.exports=n(64)(!1),e.push([t.i,"._3H5afJU0fgjYR8Pv78sDnv_0 li{padding:0 .625rem}._3H5afJU0fgjYR8Pv78sDnv_0 .media{padding-top:.625rem;padding-bottom:.625rem;margin-top:0}._3H5afJU0fgjYR8Pv78sDnv_0 .media-object{width:3.125rem;height:3.125rem;border-radius:.3125rem}._2FEfKkfZgt3Mut_7jSkvSP_0{transform:scale(.928571428571429);color:#b7b7b7;text-align:center;margin-bottom:.625rem}._37L6RhekIWg5AUAuVF6J2c_0{padding:1.25rem;background-color:#f8f8f8}._9t5y1nEIAQO47MGTMLm0a_0{padding:0 .625rem}._9t5y1nEIAQO47MGTMLm0a_0 li{display:inline-block;width:33.333333333333336%;text-align:center;padding:0 .625rem .625rem}._9t5y1nEIAQO47MGTMLm0a_0 li:first-child button{color:#fb351b;border-color:#fb351b}._9t5y1nEIAQO47MGTMLm0a_0 li button{width:100%;border:1px solid #e0e0e0;border-color:#e0e0e0;background-color:#fff;outline:0}._9t5y1nEIAQO47MGTMLm0a_0 li button._11I-hzLh2mTB3JcUldNIXL_0,._9t5y1nEIAQO47MGTMLm0a_0 li button.l4PAaNFuWYcIJl9VQLzxe_0,._9t5y1nEIAQO47MGTMLm0a_0 li button.l4PAaNFuWYcIJl9VQLzxe_0._11I-hzLh2mTB3JcUldNIXL_0,._9t5y1nEIAQO47MGTMLm0a_0 li button.l4PAaNFuWYcIJl9VQLzxe_0:focus,._9t5y1nEIAQO47MGTMLm0a_0 li button.l4PAaNFuWYcIJl9VQLzxe_0:hover,._9t5y1nEIAQO47MGTMLm0a_0 li button:active,._9t5y1nEIAQO47MGTMLm0a_0 li button:active._11I-hzLh2mTB3JcUldNIXL_0,._9t5y1nEIAQO47MGTMLm0a_0 li button:active:focus,._9t5y1nEIAQO47MGTMLm0a_0 li button:active:hover,._9t5y1nEIAQO47MGTMLm0a_0 li button:focus,._9t5y1nEIAQO47MGTMLm0a_0 li button:hover{border-color:#fdb736;background-color:#fff;outline:0}",""]),e.locals={searched:"_3H5afJU0fgjYR8Pv78sDnv_0","no-more":"_2FEfKkfZgt3Mut_7jSkvSP_0",noMore:"_2FEfKkfZgt3Mut_7jSkvSP_0",header:"_37L6RhekIWg5AUAuVF6J2c_0","hot-keywords":"_9t5y1nEIAQO47MGTMLm0a_0",hotKeywords:"_9t5y1nEIAQO47MGTMLm0a_0",focus:"_11I-hzLh2mTB3JcUldNIXL_0",active:"l4PAaNFuWYcIJl9VQLzxe_0"}},396:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",[n("div",{staticClass:"shadow-bottom",class:t.$style.header},[n("form",{on:{submit:function(e){e.preventDefault(),t.search()}}},[n("div",{staticClass:"input-group"},[t._m(0),n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{placeholder:"搜索歌曲"},domProps:{value:t.keyword},on:{focus:function(e){t.active=!0},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t.active?n("span",{staticClass:"input-group-addon",on:{click:t.cancelSearch}},[t._v("取消")]):t._e()])])]),t.searched?n("div",{class:t.$style.searched},[n("ol",{staticClass:"list-unstyled"},t._l(t.songList,function(e,o){var r=e.id,a=(e.albumId,e.albumImg),s=e.songName,i=e.singerName;return n("li",{key:r,staticClass:"media border-b",class:(c={},c[t.$style.active]=o===t.songIndex,c),on:{click:function(e){t.getSongSrc(r,o)}}},[n("div",{staticClass:"media-left"},[n("img",{staticClass:"media-object",attrs:{src:a}})]),n("div",{staticClass:"media-body media-middle"},[n("span",{domProps:{textContent:t._s(" "+i)}}),t._v(" -"),n("span",{domProps:{textContent:t._s(" "+s)}})])]);var c})),n("div",{class:t.$style.noMore},[t._v("没有更多歌曲了~")])]):n("div",{class:t.$style.hotKeywords},[n("h5",[t._v("热门搜索")]),n("ul",{staticClass:"list-unstyled"},t._l(t.hotKeywords,function(e){return n("li",[n("button",{staticClass:"btn",on:{click:function(n){t.search(e)}}},[t._v(t._s(e))])])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"input-group-addon"},[n("span",{staticClass:"iconfont icon-search"})])}]}},398:function(t,e,n){var o=n(390);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);n(66)("71da0882",o,!0)}});