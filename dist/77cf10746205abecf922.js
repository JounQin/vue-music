webpackJsonp([5],{385:function(t,e,r){var o={};o.$style=r(397);var i=r(65)(r(387),r(395),null,o);t.exports=i.exports},387:function(t,e,r){"use strict";function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,r){function o(o,s){try{var a=e[o](s),c=a.value}catch(t){return void r(t)}a.done?t(c):Promise.resolve(c).then(i,n)}function i(t){o("next",t)}function n(t){o("throw",t)}i()})}}Object.defineProperty(e,"__esModule",{value:!0});var i=r(52),n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t},s=["歌手","张杰","赵雷","李健","林志炫","张碧晨","梁博","周笔畅","张靓颖","陈奕迅","周杰伦","王力宏","TFBoys","李玉刚","魏晨","薛之谦"];e.default={name:"discover",data:function(){for(var t=[];t.length<6;)t.push(s.splice(~~(Math.random()*s.length),1)[0]);return{active:!1,hotKeywords:t,keyword:null,searched:!1}},computed:n({},r.i(i.mapGetters)(["showFooter","songList","songIndex"])),beforeRouteLeave:function(t,e,r){this.searched=!1,this.toggleFooter(!0),r()},methods:n({},r.i(i.mapActions)(["restSongList","toggleSong","toggleFooter","setSongSrc"]),{search:function(){function t(t){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e){var r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.keyword=e||this.keyword){t.next=3;break}return t.abrupt("return");case 3:return this.active=!0,t.t0=this,t.next=7,this.$http.get("/search-keyword",{params:{key:r}});case 7:t.t1=t.sent.data,t.t0.restSongList.call(t.t0,t.t1),this.searched=!0,this.toggleFooter(!1);case 11:case"end":return t.stop()}},t,this)}));return t}(),cancelSearch:function(){this.searched=!1,this.active=!1},getSongSrc:function(){function t(t,r){return e.apply(this,arguments)}var e=o(regeneratorRuntime.mark(function t(e,r){var o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(o=this.songList[r],o.songSrc){t.next=7;break}return t.t0=this,t.next=5,this.$http.get("/get-song-src",{params:{id:e}});case 5:t.t1=o.songSrc=t.sent.data,t.t0.setSongSrc.call(t.t0,t.t1);case 7:this.toggleSong({index:r,play:!0}),this.toggleFooter(!0);case 9:case"end":return t.stop()}},t,this)}));return t}()})}},389:function(t,e,r){e=t.exports=r(64)(!1),e.push([t.i,"._1EskpLo7-iGld34vX3cJb9_0 li{padding:0 .625rem}._1EskpLo7-iGld34vX3cJb9_0 .media{padding-top:.625rem;padding-bottom:.625rem;margin-top:0}._1EskpLo7-iGld34vX3cJb9_0 .media-object{width:3.125rem;height:3.125rem;border-radius:.3125rem}.HSqpXie1dMz_yPC-uwVBg_0{transform:scale(.928571428571429);color:#b7b7b7;text-align:center;margin-bottom:.625rem}._3yUauCccvc0B9mMw_pGnsr_0{padding:1.25rem;background-color:#f8f8f8}._1m2Srp6qmB3rqQ5uiSUfgj_0{padding:0 .625rem}._1m2Srp6qmB3rqQ5uiSUfgj_0 li{display:inline-block;width:33.333333333333336%;text-align:center;padding:0 .625rem .625rem}._1m2Srp6qmB3rqQ5uiSUfgj_0 li:first-child button{color:#fb351b;border-color:#fb351b}._1m2Srp6qmB3rqQ5uiSUfgj_0 li button{width:100%;border:1px solid #e0e0e0;border-color:#e0e0e0;background-color:#fff;outline:0}._1m2Srp6qmB3rqQ5uiSUfgj_0 li button._1-9z9T5Iv-mKvVtzJlRrmW_0,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button._1-9z9T5Iv-mKvVtzJlRrmW_0._14mI3rPxi7Ii77PilbPxiq_0,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button._1-9z9T5Iv-mKvVtzJlRrmW_0:focus,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button._1-9z9T5Iv-mKvVtzJlRrmW_0:hover,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button._14mI3rPxi7Ii77PilbPxiq_0,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:active,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:active._14mI3rPxi7Ii77PilbPxiq_0,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:active:focus,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:active:hover,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:focus,._1m2Srp6qmB3rqQ5uiSUfgj_0 li button:hover{border-color:#fdb736;background-color:#fff;outline:0}",""]),e.locals={searched:"_1EskpLo7-iGld34vX3cJb9_0","no-more":"HSqpXie1dMz_yPC-uwVBg_0",noMore:"HSqpXie1dMz_yPC-uwVBg_0",header:"_3yUauCccvc0B9mMw_pGnsr_0","hot-keywords":"_1m2Srp6qmB3rqQ5uiSUfgj_0",hotKeywords:"_1m2Srp6qmB3rqQ5uiSUfgj_0",focus:"_14mI3rPxi7Ii77PilbPxiq_0",active:"_1-9z9T5Iv-mKvVtzJlRrmW_0"}},395:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("div",{staticClass:"shadow-bottom",class:t.$style.header},[r("form",{on:{submit:function(e){e.preventDefault(),t.search()}}},[r("div",{staticClass:"input-group"},[t._m(0),r("input",{directives:[{name:"model",rawName:"v-model",value:t.keyword,expression:"keyword"}],staticClass:"form-control",attrs:{placeholder:"搜索歌曲"},domProps:{value:t.keyword},on:{focus:function(e){t.active=!0},input:function(e){e.target.composing||(t.keyword=e.target.value)}}}),t.active?r("span",{staticClass:"input-group-addon",on:{click:t.cancelSearch}},[t._v("取消")]):t._e()])])]),t.searched?r("div",{class:t.$style.searched},[r("ol",{staticClass:"list-unstyled"},t._l(t.songList,function(e,o){var i=e.id,n=(e.albumId,e.albumImg),s=e.songName,a=e.singerName;return r("li",{key:i,staticClass:"media border-b",class:(c={},c[t.$style.active]=o===t.songIndex,c),on:{click:function(e){t.getSongSrc(i,o)}}},[r("div",{staticClass:"media-left"},[r("img",{staticClass:"media-object",attrs:{src:n}})]),r("div",{staticClass:"media-body media-middle"},[r("span",{domProps:{textContent:t._s(" "+a)}}),t._v(" -"),r("span",{domProps:{textContent:t._s(" "+s)}})])]);var c})),r("div",{class:t.$style.noMore},[t._v("没有更多歌曲了~")])]):r("div",{class:t.$style.hotKeywords},[r("h5",[t._v("热门搜索")]),r("ul",{staticClass:"list-unstyled"},t._l(t.hotKeywords,function(e){return r("li",[r("button",{staticClass:"btn",on:{click:function(r){t.search(e)}}},[t._v(t._s(e))])])}))])])},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticClass:"input-group-addon"},[r("span",{staticClass:"iconfont icon-search"})])}]}},397:function(t,e,r){var o=r(389);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);r(66)("71da0882",o,!0)}});