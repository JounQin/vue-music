module.exports=function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="/",t(t.s=15)}([function(e,r){e.exports=require("path")},function(e,r){e.exports=require("music-api")},function(e,r){e.exports=require("fs")},function(e,r){e.exports=require("koa-static")},function(e,r){e.exports=require("path-to-regexp")},function(e,r){e.exports=require("koa")},function(e,r){e.exports=require("koa-compress")},function(e,r){e.exports=require("koa-logger")},function(e,r){e.exports=require("lru-cache")},function(e,r){e.exports=require("mkdirp")},function(e,r){e.exports=require("debug")},function(e,r){e.exports=require("koa-router")},function(e,r){e.exports=require("koa/package.json")},function(e,r){e.exports=require("vue-server-renderer/package.json")},function(e,r){e.exports=require("vue-server-renderer")},function(e,r,t){"use strict";t.r(r);var n=t(2),o=t.n(n),i=t(0),a=t.n(i),u=t(5),s=t.n(u),c=t(6),l=t.n(c),f=t(7),d=t.n(f),p=t(3),m=t.n(p),v=t(8),y=t.n(v),g=t(9),b=t.n(g),x=t(4),h=t.n(x),w=t(10),j=t.n(w),O=t(1),S=t.n(O),q=t(11),k=t.n(q),P={};setInterval(function(){return P={}},864e5);var _=new k.a({prefix:"/api"}).get("/:type(all|new)-songs",async function(e){var r=e.url.includes("all")?"all":"newsong",t=P[r];t||(t=(await S.a.searchSong("netease",{key:"林俊杰"})).songList.map(function(e){var r=e.id,t=e.name;return{id:r,albumImg:e.album.coverBig,singerName:e.artists[0].name,songName:t,wait:!0}})),e.body=t}).get("/search-keyword",async function(e){e.body=(await S.a.searchSong("netease",{key:e.query.key})).songList.map(function(e){var r=e.id,t=e.name;return{id:r,albumImg:e.album.coverBig,singerName:e.artists[0].name,songName:t,wait:!0}})}).get("/get-song-src",async function(e){e.body=(await S.a.getSong("netease",{id:e.query.id})).url}),I=+process.env.PORT||4e3,A=("http://localhost:".concat(I,"/"),a.a.resolve),T=require;function M(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var E,B,D=j()("hi:server"),F=o.a.readFileSync(A("dist/template.html"),"utf-8"),R=new s.a;R.use(l()()).use(d()()).use(m()(A("public"))),function(e){e.use(_.routes()).use(_.allowedMethods())}(R);var C=t(12).version,L=t(13).version,G={"Content-Type":"text/html",Server:"koa/".concat(C,"; vue-server-renderer/").concat(L)},W=["/test"],z=["/","/articles","/article/:id(\\d+)"];R.use(async function(e,r){if(await void 0,"GET"!==e.method||e.url.lastIndexOf(".")>e.url.lastIndexOf("/")||!["*/*","text/html"].find(function(r){return e.get("Accept").includes(r)}))return r();e.set(G);var t,n,o=e.url;if(W.find(function(e){return h()(e).exec(o)}))return e.url="__non-ssr-page__.html",void await r();if(z.find(function(e){return h()(e).exec(o)})){var i=o.split("?")[0].replace(/^\//,"")||"home",u="".concat(i,".html"),s=e.hostname.endsWith(".now.sh");if(n=s?a.a.resolve("/tmp",u):A("dist/static/"+u),B.existsSync(n))return void(s?e.body=B.createReadStream(n):(e.url=u,await r()));t=!0}var c=Date.now(),l={ctx:e,title:"vue-ssr"},f="";e.respond=!1,e.status=200;var d=e.res,p=E.renderToStream(l).on("error",function(r){switch(e.status=r.status||500){case 302:return e.redirect(r.url),d.end();case 404:return d.end("404 | Page Not Found");default:d.end("500 | Internal Server Error"),console.error("error during render : ".concat(o)),console.error(r.stack)}}).on("end",function(){if(f)try{b.a.sync(a.a.dirname(n),{fs:B}),B.writeFileSync(n,f),D('static html file "'.concat(n,'" is generated!'))}catch(e){console.error(e)}D("whole request: ".concat(Date.now()-c,"ms"))});t&&p.on("data",function(e){return f+=e}),p.pipe(d)});B=o.a,E=function(e,r){return t(14).createBundleRenderer(e,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){N(e,r,t[r])})}return e}({},r,{template:F,inject:!1,cache:y()({max:1e3,maxAge:9e5}),basedir:A("dist/static"),runInNewContext:!1}))}(T(A("dist/vue-ssr-server-bundle.json")),{clientManifest:T(A("dist/vue-ssr-client-manifest.json"))}),R.use(m()("dist/static"));var H=[I,"0.0.0.0"];R.listen.apply(R,H.concat([function(e){return D.apply(void 0,M(e?[e]:["Server is now running at %s:%s."].concat(M(H.reverse()))))}]))}]);